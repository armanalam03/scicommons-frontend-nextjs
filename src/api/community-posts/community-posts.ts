/**
 * Generated by orval v6.29.1 üç∫
 * Do not edit manually.
 * MyApp API
 * OpenAPI spec version: 1.0.0
 */
import { useMutation, useQuery } from '@tanstack/react-query';
import type {
  MutationFunction,
  QueryFunction,
  QueryKey,
  UseMutationOptions,
  UseMutationResult,
  UseQueryOptions,
  UseQueryResult,
} from '@tanstack/react-query';

import { customInstance } from '.././custom-instance';
import type { BodyType, ErrorType } from '.././custom-instance';
import type {
  ArticleDetails,
  ArticleResponseSchema,
  CommunitiesApiPostsCreateCommunityArticleBody,
  CommunitiesApiPostsGetCommunityArticlesParams,
  Message,
} from '.././schemas';

type SecondParameter<T extends (...args: any) => any> = Parameters<T>[1];

/**
 * Retrieves a list of articles associated with a specific community identified by
its id. The endpoint filters articles based on community visibility rules:

This endpoint supports filtering articles by search keywords, sorting
(latest, popular, older), and minimum rating.

Parameters:
    request (HttpRequest): The standard HttpRequest object.
    community_id (str): The id of the community for which to retrieve articles.
    search (str, optional): Keyword to filter articles based on their titles.
    Defaults to None.
    sort (str, equal to):
        - 'latest' - Orders articles by newest first.
        - 'popular' - Orders articles by popularity.
        - 'older' - Orders articles by oldest first.
    rating (int, optional): Filters articles that have a rating greater than
    or equal to the specified value.

Returns:
    List[ArticleSchema]: A list of articles that meet the criteria, serialized
    by ArticleSchema.
    HTTP 404: If the specified community does not exist.
    HTTP 500: If there is any other error during the retrieval process.
 * @summary Get articles in a community
 */
export const communitiesApiPostsGetCommunityArticles = (
  communityId: number,
  params?: CommunitiesApiPostsGetCommunityArticlesParams,
  options?: SecondParameter<typeof customInstance>,
  signal?: AbortSignal
) => {
  return customInstance<ArticleDetails[]>(
    { url: `/api/communities/${communityId}/community_articles`, method: 'GET', params, signal },
    options
  );
};

export const getCommunitiesApiPostsGetCommunityArticlesQueryKey = (
  communityId: number,
  params?: CommunitiesApiPostsGetCommunityArticlesParams
) => {
  return [
    `/api/communities/${communityId}/community_articles`,
    ...(params ? [params] : []),
  ] as const;
};

export const getCommunitiesApiPostsGetCommunityArticlesQueryOptions = <
  TData = Awaited<ReturnType<typeof communitiesApiPostsGetCommunityArticles>>,
  TError = ErrorType<Message>,
>(
  communityId: number,
  params?: CommunitiesApiPostsGetCommunityArticlesParams,
  options?: {
    query?: Partial<
      UseQueryOptions<
        Awaited<ReturnType<typeof communitiesApiPostsGetCommunityArticles>>,
        TError,
        TData
      >
    >;
    request?: SecondParameter<typeof customInstance>;
  }
) => {
  const { query: queryOptions, request: requestOptions } = options ?? {};

  const queryKey =
    queryOptions?.queryKey ??
    getCommunitiesApiPostsGetCommunityArticlesQueryKey(communityId, params);

  const queryFn: QueryFunction<
    Awaited<ReturnType<typeof communitiesApiPostsGetCommunityArticles>>
  > = ({ signal }) =>
    communitiesApiPostsGetCommunityArticles(communityId, params, requestOptions, signal);

  return { queryKey, queryFn, enabled: !!communityId, ...queryOptions } as UseQueryOptions<
    Awaited<ReturnType<typeof communitiesApiPostsGetCommunityArticles>>,
    TError,
    TData
  > & { queryKey: QueryKey };
};

export type CommunitiesApiPostsGetCommunityArticlesQueryResult = NonNullable<
  Awaited<ReturnType<typeof communitiesApiPostsGetCommunityArticles>>
>;
export type CommunitiesApiPostsGetCommunityArticlesQueryError = ErrorType<Message>;

/**
 * @summary Get articles in a community
 */
export const useCommunitiesApiPostsGetCommunityArticles = <
  TData = Awaited<ReturnType<typeof communitiesApiPostsGetCommunityArticles>>,
  TError = ErrorType<Message>,
>(
  communityId: number,
  params?: CommunitiesApiPostsGetCommunityArticlesParams,
  options?: {
    query?: Partial<
      UseQueryOptions<
        Awaited<ReturnType<typeof communitiesApiPostsGetCommunityArticles>>,
        TError,
        TData
      >
    >;
    request?: SecondParameter<typeof customInstance>;
  }
): UseQueryResult<TData, TError> & { queryKey: QueryKey } => {
  const queryOptions = getCommunitiesApiPostsGetCommunityArticlesQueryOptions(
    communityId,
    params,
    options
  );

  const query = useQuery(queryOptions) as UseQueryResult<TData, TError> & { queryKey: QueryKey };

  query.queryKey = queryOptions.queryKey;

  return query;
};

/**
 * @summary Create an article in a community
 */
export const communitiesApiPostsCreateCommunityArticle = (
  communityName: string,
  communitiesApiPostsCreateCommunityArticleBody: BodyType<CommunitiesApiPostsCreateCommunityArticleBody>,
  options?: SecondParameter<typeof customInstance>
) => {
  const formData = new FormData();
  if (communitiesApiPostsCreateCommunityArticleBody.image_file !== undefined) {
    formData.append('image_file', communitiesApiPostsCreateCommunityArticleBody.image_file);
  }
  if (communitiesApiPostsCreateCommunityArticleBody.pdf_file !== undefined) {
    formData.append('pdf_file', communitiesApiPostsCreateCommunityArticleBody.pdf_file);
  }
  formData.append('details', JSON.stringify(communitiesApiPostsCreateCommunityArticleBody.details));

  return customInstance<ArticleResponseSchema>(
    {
      url: `/api/communities/${communityName}/create_community_article`,
      method: 'POST',
      headers: { 'Content-Type': 'multipart/form-data' },
      data: formData,
    },
    options
  );
};

export const getCommunitiesApiPostsCreateCommunityArticleMutationOptions = <
  TError = ErrorType<Message>,
  TContext = unknown,
>(options?: {
  mutation?: UseMutationOptions<
    Awaited<ReturnType<typeof communitiesApiPostsCreateCommunityArticle>>,
    TError,
    { communityName: string; data: BodyType<CommunitiesApiPostsCreateCommunityArticleBody> },
    TContext
  >;
  request?: SecondParameter<typeof customInstance>;
}): UseMutationOptions<
  Awaited<ReturnType<typeof communitiesApiPostsCreateCommunityArticle>>,
  TError,
  { communityName: string; data: BodyType<CommunitiesApiPostsCreateCommunityArticleBody> },
  TContext
> => {
  const { mutation: mutationOptions, request: requestOptions } = options ?? {};

  const mutationFn: MutationFunction<
    Awaited<ReturnType<typeof communitiesApiPostsCreateCommunityArticle>>,
    { communityName: string; data: BodyType<CommunitiesApiPostsCreateCommunityArticleBody> }
  > = (props) => {
    const { communityName, data } = props ?? {};

    return communitiesApiPostsCreateCommunityArticle(communityName, data, requestOptions);
  };

  return { mutationFn, ...mutationOptions };
};

export type CommunitiesApiPostsCreateCommunityArticleMutationResult = NonNullable<
  Awaited<ReturnType<typeof communitiesApiPostsCreateCommunityArticle>>
>;
export type CommunitiesApiPostsCreateCommunityArticleMutationBody =
  BodyType<CommunitiesApiPostsCreateCommunityArticleBody>;
export type CommunitiesApiPostsCreateCommunityArticleMutationError = ErrorType<Message>;

/**
 * @summary Create an article in a community
 */
export const useCommunitiesApiPostsCreateCommunityArticle = <
  TError = ErrorType<Message>,
  TContext = unknown,
>(options?: {
  mutation?: UseMutationOptions<
    Awaited<ReturnType<typeof communitiesApiPostsCreateCommunityArticle>>,
    TError,
    { communityName: string; data: BodyType<CommunitiesApiPostsCreateCommunityArticleBody> },
    TContext
  >;
  request?: SecondParameter<typeof customInstance>;
}): UseMutationResult<
  Awaited<ReturnType<typeof communitiesApiPostsCreateCommunityArticle>>,
  TError,
  { communityName: string; data: BodyType<CommunitiesApiPostsCreateCommunityArticleBody> },
  TContext
> => {
  const mutationOptions = getCommunitiesApiPostsCreateCommunityArticleMutationOptions(options);

  return useMutation(mutationOptions);
};
/**
 * @summary Submit Article To Community
 */
export const communitiesApiPostsSubmitArticleToCommunity = (
  articleSlug: string,
  communityName: string,
  options?: SecondParameter<typeof customInstance>
) => {
  return customInstance<ArticleResponseSchema>(
    { url: `/api/communities/submit-article/${articleSlug}/${communityName}`, method: 'POST' },
    options
  );
};

export const getCommunitiesApiPostsSubmitArticleToCommunityMutationOptions = <
  TError = ErrorType<Message>,
  TContext = unknown,
>(options?: {
  mutation?: UseMutationOptions<
    Awaited<ReturnType<typeof communitiesApiPostsSubmitArticleToCommunity>>,
    TError,
    { articleSlug: string; communityName: string },
    TContext
  >;
  request?: SecondParameter<typeof customInstance>;
}): UseMutationOptions<
  Awaited<ReturnType<typeof communitiesApiPostsSubmitArticleToCommunity>>,
  TError,
  { articleSlug: string; communityName: string },
  TContext
> => {
  const { mutation: mutationOptions, request: requestOptions } = options ?? {};

  const mutationFn: MutationFunction<
    Awaited<ReturnType<typeof communitiesApiPostsSubmitArticleToCommunity>>,
    { articleSlug: string; communityName: string }
  > = (props) => {
    const { articleSlug, communityName } = props ?? {};

    return communitiesApiPostsSubmitArticleToCommunity(articleSlug, communityName, requestOptions);
  };

  return { mutationFn, ...mutationOptions };
};

export type CommunitiesApiPostsSubmitArticleToCommunityMutationResult = NonNullable<
  Awaited<ReturnType<typeof communitiesApiPostsSubmitArticleToCommunity>>
>;

export type CommunitiesApiPostsSubmitArticleToCommunityMutationError = ErrorType<Message>;

/**
 * @summary Submit Article To Community
 */
export const useCommunitiesApiPostsSubmitArticleToCommunity = <
  TError = ErrorType<Message>,
  TContext = unknown,
>(options?: {
  mutation?: UseMutationOptions<
    Awaited<ReturnType<typeof communitiesApiPostsSubmitArticleToCommunity>>,
    TError,
    { articleSlug: string; communityName: string },
    TContext
  >;
  request?: SecondParameter<typeof customInstance>;
}): UseMutationResult<
  Awaited<ReturnType<typeof communitiesApiPostsSubmitArticleToCommunity>>,
  TError,
  { articleSlug: string; communityName: string },
  TContext
> => {
  const mutationOptions = getCommunitiesApiPostsSubmitArticleToCommunityMutationOptions(options);

  return useMutation(mutationOptions);
};
